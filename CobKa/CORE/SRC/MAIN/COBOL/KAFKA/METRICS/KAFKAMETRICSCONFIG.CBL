IDENTIFICATION DIVISION.
PROGRAM-ID. KAFKAMETRICSCONFIG.

ENVIRONMENT DIVISION.
CONFIGURATION SECTION.
INPUT-OUTPUT SECTION.
FILE-CONTROL.

DATA DIVISION.
WORKING-STORAGE SECTION.
01 REPORTER-CLASSES-CONFIG PIC X(100).
01 REPORTER-CLASSES-DEFAULT PIC X(100).
01 POLLING-INTERVAL-SECONDS-CONFIG PIC 9(3).
01 POLLING-INTERVAL-SECONDS-DEFAULT PIC 9(3).
01 REPORTER-CLASSES-LIST OCCURS 1 TO 10 TIMES DEPENDING ON REPORTER-CLASSES.
   05 REPORTER-CLASS PIC X(50).
01 REPORTER-CLASSES-COUNT PIC 9(2).

PROCEDURE DIVISION.
MAIN-PROCEDURE.
    MOVE MetricConfigs-KAFKA-METRICS-REPORTER-CLASSES-CONFIG TO REPORTER-CLASSES-CONFIG.
    MOVE MetricConfigs-KAFKA-METRIC-REPORTER-CLASSES-DEFAULT TO REPORTER-CLASSES-DEFAULT.
    MOVE MetricConfigs-KAFKA-METRICS-POLLING-INTERVAL-SECONDS-CONFIG TO POLLING-INTERVAL-SECONDS-CONFIG.
    MOVE MetricConfigs-KAFKA-METRICS-POLLING-INTERVAL-SECONDS-DEFAULT TO POLLING-INTERVAL-SECONDS-DEFAULT.

    PERFORM PARSE-REPORTER-CLASSES.

    MOVE REPORTER-CLASSES-COUNT TO REPORTERS-COUNT.

PARSE-REPORTER-CLASSES.
    INITIALIZE REPORTER-CLASSES-LIST.
    UNSTRING REPORTER-CLASSES-CONFIG DELIMITED BY "," INTO REPORTER-CLASS
        WITH POINTER REPORTER-CLASSES-COUNT.
    IF REPORTER-CLASS NOT = SPACES
        ADD 1 TO REPORTER-CLASSES-COUNT.

STOP RUN.